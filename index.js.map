{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const picsList = document.querySelector('.gallery');\n\nfunction renderImages(pics) {\n  const markup = pics\n    .map(pic => {\n      return `<li class=\"gallery-item\">\n  \n        <a class=\"gallery-link\" href=${pic.webformatURL}> \n          <img\n            class=\"gallery-image\"\n            src=${pic.webformatURL}\n            alt='${pic.tags}'\n  \n          />\n          </a>\n          <ul class='properties'>\n          <li class='property'><div class='key'>Likes</div> ${pic.likes}</li>\n          <li class='property'><div class='key'>Views </div> ${pic.views}</li>\n          <li class='property'><div class='key'>Comments </div> ${pic.comments}</li>\n          <li class='property'><div class='key'>Downloads </div> ${pic.downloads}</li>\n          \n          \n  \n  \n  </ul>\n  \n          </li>\n          `;\n    })\n    .join('');\n  picsList.insertAdjacentHTML('beforeend', markup);\n  loadMore.style.display = 'block';\n}\n\nexport { renderImages };\n","import axios from 'axios';\nimport { closeX } from '../main';\nlet totalHits = 0;\nlet perPage = 15;\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nasync function searchImages(query, page = 1) {\n  const params = {\n    key: '46119113-9d91afa1c686c5ea1318b0639',\n    q: encodeURIComponent(query),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: perPage,\n  };\n  loadingMessage.style.display = 'block';\n\n  try {\n    const response = await axios.get('', { params });\n    loadingMessage.style.display = 'none';\n    totalHits = response.data.totalHits;\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      titleColor: '#FFFFFF',\n      message: error,\n      iconUrl:\n        'https://raw.githubusercontent.com/versroot/goit-js-hw-11/refs/heads/main/src/img/bi_x-octagon.svg',\n      backgroundColor: '#EF4040',\n      messageColor: '#FFFFFF',\n      close: true,\n      maxWidth: '432px',\n\n      fontSize: '16px',\n      fontWeight: '400',\n      lineHeight: '24px',\n      letterSpacing: '0.5px',\n\n      onOpening: closeX,\n    });\n\n    loadingMessage.style.display = 'none';\n  }\n}\n\nexport { searchImages, totalHits, perPage };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { renderImages } from './js/render-functions.js';\nimport { searchImages, totalHits, perPage } from './js/pixabay-api.js';\n\nconst picsList = document.querySelector('.gallery');\nconst input = document.querySelector('#input');\nconst loadingMessage = document.querySelector('#loadingMessage');\nconst loadMore = document.querySelector('#loadMore');\nconst form = document.querySelector('#searchForm');\n\nlet currentPage;\nfunction showErrorToast(message) {\n  iziToast.error({\n    title: '',\n    titleColor: '#FFFFFF',\n    message: message,\n    iconUrl:\n      'https://raw.githubusercontent.com/versroot/goit-js-hw-11/refs/heads/main/src/img/bi_x-octagon.svg',\n    backgroundColor: '#EF4040',\n    messageColor: '#FFFFFF',\n    close: true,\n    maxWidth: '432px',\n    fontSize: '16px',\n    fontWeight: '400',\n    lineHeight: '24px',\n    letterSpacing: '0.5px',\n    onOpening: closeX,\n  });\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentPage = 1;\n  picsList.innerHTML = '';\n  loadMore.style.display = 'none';\n\n  const query = input.value.trim();\n  if (query != '') {\n    loadingMessage.style.display = 'block';\n    try {\n      const pics = await searchImages(query, currentPage);\n\n      if (pics.hits.length === 0) {\n        console.log('No pics');\n        showErrorToast(\n          'Sorry, there are no images matching your search query. Please, try again!'\n        );\n        return;\n      } else {\n        renderImages(pics.hits);\n        lightboxgallery.refresh();\n      }\n      loadingMessage.style.display = 'none';\n      if (totalHits <= currentPage * perPage) {\n        console.log('No more pics');\n        loadMore.style.display = 'none';\n        showErrorToast('No more pics');\n      }\n    } catch (error) {\n      console.log(error);\n      showErrorToast(error);\n      loadingMessage.style.display = 'none';\n    }\n  } else {\n    showErrorToast('Empty request');\n  }\n  currentPage += 1;\n});\n\nfunction closeX(instance, toast) {\n  var closeButton = toast.querySelector('.iziToast-close');\n  closeButton.style.backgroundColor = 'transparent';\n  closeButton.style.backgroundImage =\n    \"url('https://raw.githubusercontent.com/versroot/goit-js-hw-11/refs/heads/main/src/img/bi_x-lg.svg')\";\n  closeButton.style.backgroundSize = 'contain';\n  closeButton.style.width = '16px';\n  closeButton.style.height = '16px';\n\n  closeButton.style.color = 'transparent';\n  closeButton.style.margin = '18px';\n}\nlet lightboxgallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n\n  captionDelay: 250,\n});\nlightboxgallery.on('show.simplelightbox', function () {});\n\nloadMore.addEventListener('click', async event => {\n  event.preventDefault();\n  const query = input.value.trim();\n\n  try {\n    const pics = await searchImages(query, currentPage);\n\n    renderImages(pics.hits);\n    const galleryItem = document.querySelector('.gallery-item');\n    const rect = galleryItem.getBoundingClientRect();\n    console.log(rect.height);\n    window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth',\n    });\n    lightboxgallery.refresh();\n    if (pics.hits.length === 0 || totalHits <= (currentPage + 1) * perPage) {\n      console.log('No more pics');\n      loadMore.style.display = 'none';\n      showErrorToast('No more pics');\n    }\n    currentPage += 1;\n    loadingMessage.style.display = 'none';\n  } catch (error) {\n    console.log(error);\n    loadingMessage.style.display = 'none';\n  }\n});\nexport { closeX };\n"],"names":["picsList","renderImages","pics","markup","pic","totalHits","perPage","axios","searchImages","query","page","params","response","error","closeX","input","loadingMessage","loadMore","form","currentPage","showErrorToast","message","iziToast","event","lightboxgallery","instance","toast","closeButton","SimpleLightbox","rect"],"mappings":"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"}